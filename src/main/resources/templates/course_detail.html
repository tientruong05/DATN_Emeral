<!DOCTYPE html>
<html th:replace="~{/layout::view(~{::title}, ~{::body}, ~{::style})}" xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title th:text="${course.ten_khoa_hoc} + ' - DEVNEST LEARNING'"></title>
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
	<!-- Bootstrap Icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />
	<!-- Font Awesome for icons -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
	<style>
		/* Reset CSS */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
		}

		body {
			color: #333;
			line-height: 1.6;
			background-color: #f5f5f5;
		}

		/* Course Header */
		.course-header {
			background-color: #002855;
			color: white;
			padding: 3rem 5%;
			position: relative;
		}

		.course-header-content {
			display: flex;
			justify-content: space-between;
			gap: 2rem;
		}

		.course-info {
			width: 60%;
		}

		.course-title {
			font-size: 2.2rem;
			margin-bottom: 1rem;
			font-weight: 700;
		}

		.course-description {
			margin-bottom: 1.5rem;
			font-size: 1.1rem;
			opacity: 0.9;
		}

		.course-meta {
			display: flex;
			align-items: center;
			gap: 1.5rem;
			margin-bottom: 1rem;
			font-size: 0.9rem;
		}

		.course-meta-item {
			display: flex;
			align-items: center;
		}

		.course-meta-item i {
			margin-right: 0.5rem;
		}

		.course-image-container {
			width: 40%;
			position: relative;
		}

		.course-image {
			width: 100%;
			max-width: 400px;
			border-radius: 8px;
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
			border: 3px solid white;
		}

		/* Course Content */
		.course-content-container {
			padding: 3rem 5%;
			display: flex;
			justify-content: space-between;
			gap: 3rem;
		}

		.course-details {
			width: 70%;
		}

		.course-sidebar {
			width: 30%;
		}

		.section-title {
			font-size: 1.5rem;
			margin-bottom: 1.5rem;
			position: relative;
			padding-bottom: 0.5rem;
			border-bottom: 2px solid #eee;
		}

		.section-title::after {
			content: "";
			position: absolute;
			width: 50px;
			height: 3px;
			background-color: #002855;
			bottom: -2px;
			left: 0;
		}

		/* What You'll Learn */
		.features-list {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 1rem;
			margin-bottom: 2rem;
		}

		.feature-item {
			display: flex;
			align-items: flex-start;
		}

		.feature-item i {
			margin-right: 0.5rem;
			color: #28a745;
			margin-top: 0.3rem;
		}

		/* Course Content */
		.accordion-button {
			font-weight: 600;
			padding: 1rem;
		}

		.accordion-button:not(.collapsed) {
			background-color: #e7f1ff;
			color: #002855;
		}

		.accordion-body {
			padding: 0;
		}

		.lesson-list {
			list-style: none;
			margin: 0;
			padding: 0;
		}

		.lesson-item {
			padding: 1rem;
			border-bottom: 1px solid #eee;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.lesson-title {
			display: flex;
			align-items: center;
		}

		.lesson-title i {
			margin-right: 0.75rem;
			color: #666;
		}

		.lesson-meta {
			font-size: 0.85rem;
			color: #777;
		}

		/* Course Sidebar */
		.course-card {
			background-color: white;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
			position: sticky;
			top: 1rem;
		}

		.course-card-header {
			padding: 1.5rem;
			text-align: center;
		}

		.course-card-price {
			font-size: 2rem;
			font-weight: bold;
			margin-bottom: 1rem;
		}

		.course-card-button {
			display: block;
			width: 100%;
			padding: 1rem;
			background-color: #002855;
			color: white;
			border: none;
			border-radius: 4px;
			font-size: 1rem;
			font-weight: 600;
			text-align: center;
			text-decoration: none;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}

		.course-card-button:hover {
			background-color: #001f42;
		}

		.course-card-button.purchased {
			background-color: #28a745;
		}

		.course-card-button.purchased:hover {
			background-color: #218838;
		}

		.course-card-details {
			padding: 1.5rem;
			border-top: 1px solid #eee;
		}

		.course-detail-item {
			display: flex;
			justify-content: space-between;
			margin-bottom: 1rem;
		}

		.course-detail-label {
			color: #777;
		}

		.course-detail-value {
			font-weight: 600;
		}

		/* Instructor */
		.instructor-card {
			background-color: white;
			border-radius: 8px;
			padding: 1.5rem;
			margin-bottom: 2rem;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
		}

		.instructor-info {
			display: flex;
			align-items: center;
			margin-bottom: 1rem;
		}

		.instructor-avatar {
			width: 64px;
			height: 64px;
			border-radius: 50%;
			margin-right: 1rem;
			object-fit: cover;
		}

		.instructor-name {
			font-size: 1.2rem;
			margin-bottom: 0.25rem;
		}

		.instructor-title {
			color: #666;
			font-size: 0.9rem;
		}

		.instructor-stats {
			display: flex;
			gap: 1.5rem;
			margin-bottom: 1rem;
			font-size: 0.9rem;
		}

		.instructor-stat-item {
			display: flex;
			align-items: center;
		}

		.instructor-stat-item i {
			margin-right: 0.5rem;
			color: #002855;
		}

		/* Responsive Design */
		@media (max-width: 991px) {
			.course-header-content {
				flex-direction: column;
			}

			.course-info,
			.course-image-container {
				width: 100%;
			}

			.course-image {
				max-width: 100%;
				margin-top: 1.5rem;
			}

			.course-content-container {
				flex-direction: column-reverse;
			}

			.course-details,
			.course-sidebar {
				width: 100%;
			}

			.features-list {
				grid-template-columns: 1fr;
			}
		}

		@media (max-width: 576px) {
			.course-meta {
				flex-direction: column;
				align-items: flex-start;
				gap: 0.5rem;
			}
		}
		.original-price {
		        font-size: 0.7rem;
		        color: #999;
		        text-decoration: line-through;
		        margin-bottom: 2px;
		      }

		      .price {
		        font-weight: bold;
		      }

		      .free {
		        color: #28a745;
		      }

		      .discounted-price {
		        color: #e74c3c;
		        font-weight: bold;
		      }
	</style>

</head>

<body>
	<!-- Course Header -->
	<section class="course-header">
		<div class="course-header-content">
			<div class="course-info">
				<h1 class="course-title" th:text="${course.ten_khoa_hoc}"></h1>
				<p class="course-description" th:text="${course.mo_ta}"></p>
				<div class="course-meta">
					<div class="course-meta-item">
						<i class="fas fa-user"></i>
						<span>Chuyên gia DEVNEST LEARNING</span>
					</div>
					<div class="course-meta-item">
						<i class="fas fa-calendar-alt"></i>
						<span>Cập nhật thường xuyên</span>
					</div>
					<div class="course-meta-item">
						<i class="fas fa-language"></i>
						<span>Tiếng Việt</span>
					</div>
					<div class="course-meta-item">
						<i class="fas fa-infinity"></i>
						<span>Truy cập trọn đời</span>
					</div>
				</div>
				<div class="course-meta">
					<div class="course-meta-item">
						<i class="fas fa-video"></i>
						<span th:text="${videoCount} + ' video bài giảng'"></span>
					</div>
					<div class="course-meta-item">
						<i class="fas fa-certificate"></i>
						<span>Chứng chỉ hoàn thành</span>
					</div>
				</div>
			</div>
			<div class="course-image-container">
				<img th:src="${course.anh_dai_dien} ? '/upload/' + ${course.anh_dai_dien} : '/upload/default.png'"
					alt="Course thumbnail" class="course-image" />
			</div>
		</div>
	</section>

	<!-- Course Content -->
	<section class="course-content-container">
		<div class="course-details">
			<!-- What You'll Learn -->
			<div class="what-youll-learn">
				<h2 class="section-title">Bạn sẽ học được gì</h2>
				<div class="features-list">
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Hiểu sâu các khái niệm cốt lõi của lĩnh vực này</span>
					</div>
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Áp dụng kiến thức vào các tình huống thực tế</span>
					</div>
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Phát triển kỹ năng giải quyết vấn đề</span>
					</div>
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Xây dựng nền tảng vững chắc cho sự nghiệp</span>
					</div>
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Nâng cao năng lực chuyên môn</span>
					</div>
					<div class="feature-item">
						<i class="fas fa-check"></i>
						<span>Tự tin thực hành các kỹ thuật đã học</span>
					</div>
				</div>
			</div>

			<!-- Course Content -->
			<div class="course-curriculum">
				<h2 class="section-title">Nội dung khóa học</h2>
				<div class="accordion" id="accordionExample">
					<div class="accordion-item">
						<h2 class="accordion-header" id="headingOne">
							<button class="accordion-button" type="button" data-bs-toggle="collapse"
								data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
								Danh sách video bài giảng
							</button>
						</h2>
						<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
							data-bs-parent="#accordionExample">
							<div class="accordion-body">
								<ul class="lesson-list">
									<li th:each="video : ${videos}" class="lesson-item">
										<div class="lesson-title">
											<i class="fas fa-play-circle"></i>
											<span th:text="${video.ten_video}"></span>
										</div>
										<div class="lesson-meta">
											<span>Video bài giảng</span>
										</div>
									</li>
									<li th:if="${videos.isEmpty()}" class="lesson-item">
										<div class="lesson-title">
											<i class="fas fa-exclamation-circle"></i>
											<span>Chưa có video bài giảng cho khóa học này</span>
										</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Requirements -->
			<div class="requirements mt-4">
				<h2 class="section-title">Yêu cầu</h2>
				<ul>
					<li>
						Không có yêu cầu đặc biệt - khóa học phù hợp cho mọi trình độ
					</li>
					<li>Chỉ cần máy tính có kết nối internet để học trực tuyến</li>
					<li>Sẵn sàng học hỏi và thực hành kiến thức mới</li>
				</ul>
			</div>

			<!-- Instructor -->
			<div class="instructor mt-4">
				<h2 class="section-title">Giảng viên</h2>
				<div class="instructor-card">
					<div class="instructor-info">
						<img src="/upload/default.png" alt="Instructor" class="instructor-avatar" />
						<div>
							<h3 class="instructor-name">
								Đội ngũ giảng viên DEVNEST LEARNING
							</h3>
							<p class="instructor-title">Chuyên gia trong lĩnh vực</p>
						</div>
					</div>
					<div class="instructor-stats">
						<div class="instructor-stat-item">
							<i class="fas fa-star"></i>
							<span>4.8 Điểm đánh giá</span>
						</div>
						<div class="instructor-stat-item">
							<i class="fas fa-user-graduate"></i>
							<span>500+ Học viên</span>
						</div>
						<div class="instructor-stat-item">
							<i class="fas fa-book"></i>
							<span>5+ Khóa học</span>
						</div>
					</div>
					<p>
						Đội ngũ giảng viên của DEVNEST LEARNING là những chuyên gia hàng
						đầu với nhiều năm kinh nghiệm trong lĩnh vực. Với phương pháp
						giảng dạy hiệu quả và thực tiễn, họ sẽ giúp bạn tiếp thu kiến thức
						một cách nhanh chóng và dễ dàng áp dụng vào thực tế.
					</p>
				</div>
			</div>
		</div>

		<div class="course-sidebar">
			<div class="course-card">
				<div class="course-card-header">
					<div class="original-price" th:if="${course.isDiscounted() and course.gia_tien != null}"
						th:text="${#numbers.formatDecimal(course.gia_tien, 0, 'COMMA', 2, 'POINT')} + ' VND'"></div>
					<!-- Giá sau giảm hoặc giá bình thường -->
					<span th:if="${course.gia_tien == null}" class="price free">Miễn phí</span>
					<span th:if="${course.gia_tien != null and !course.isDiscounted()}" class="price"
						th:text="${#numbers.formatDecimal(course.gia_tien, 0, 'COMMA', 2, 'POINT')} + ' VND'"></span>
					<span th:if="${course.gia_tien != null and course.isDiscounted()}" class="price discounted-price"
						th:text="${#numbers.formatDecimal(course.getDiscountedPrice(), 0, 'COMMA', 2, 'POINT')} + ' VND'"></span>
				</div>
				<!-- Thông báo lỗi nếu không có video -->
				<div th:if="${errorMessage != null}" class="alert alert-warning text-center"
					style="margin-bottom: 1rem; font-size: 1rem">
					<i class="fas fa-exclamation-triangle"></i>
					<span th:text="${errorMessage}"></span>
				</div>
				<div th:if="${isEnrolled}">
					<a th:href="@{/video-learning/{id}(id=${course.ID_khoa_hoc})}" class="course-card-button purchased"
						th:if="${!videos.isEmpty()}">Xem ngay</a>
					<button class="course-card-button purchased disabled" th:if="${videos.isEmpty()}" disabled
						style="cursor: not-allowed; opacity: 0.7">
						Xem ngay
					</button>
				</div>
				<div th:unless="${isEnrolled}">
					<form th:action="@{/cart/add/{id}(id=${course.ID_khoa_hoc})}" method="post">
						<input type="hidden" name="returnUrl"
							th:value="@{/course-detail/{id}(id=${course.ID_khoa_hoc})}" />
						<button type="submit" class="course-card-button">
							Thêm vào giỏ hàng
						</button>
					</form>
				</div>
			</div>
			<div class="course-card-details">
				<div class="course-detail-item">
					<span class="course-detail-label">Tổng số video</span>
					<span class="course-detail-value" th:text="${videoCount}"></span>
				</div>
				<div class="course-detail-item">
					<span class="course-detail-label">Cấp độ</span>
					<span class="course-detail-value">Tất cả trình độ</span>
				</div>
				<div class="course-detail-item">
					<span class="course-detail-label">Truy cập</span>
					<span class="course-detail-value">Trọn đời</span>
				</div>
				<div class="course-detail-item">
					<span class="course-detail-label">Chứng chỉ</span>
					<span class="course-detail-value">Có</span>
				</div>
			</div>
		</div>
		</div>
	</section>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
